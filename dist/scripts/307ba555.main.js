window.fazenda={Models:{},Collections:{},Views:{},Routers:{},init:function(){"use strict";this.collections=new fazenda.Collections.Module,this.model=new fazenda.Models.Module,this.view=new fazenda.Views.Module,this.model.fetch({success:function(a,b){fazenda.participants(b.data),fazenda.popOvers()},error:function(a,b){console.log("erro ao carregar o JSON!!!")}})},participants:function(a){var b=fazenda.collections.participantsJson(a);fazenda.view.participants(b)},popOvers:function(){fazenda.view.popOvers()}},$(document).ready(function(){"use strict";fazenda.init()}),this.JST=this.JST||{},this.JST["app/scripts/templates/module.ejs"]=function(obj){obj||(obj={});var __p="";_.escape;with(obj)__p+="<p>Your content here.</p>\n\n";return __p},fazenda.Routers=fazenda.Routers||{},function(){"use strict";fazenda.Routers.Module=Backbone.Router.extend({})}(),fazenda.Views=fazenda.Views||{},function(){"use strict";fazenda.Views.Module=Backbone.View.extend({popoverTemplate:['   <div class="popover">                          ','   <div class="arrow"></div>                      ','   <div class="popover-content">                  ',"   </div>                                         ","   </div>                                         "].join(""),popoverContent:["   <div>                                         ",'     <table class="table">                       ',"       <tr>                                      ","         <th>Gostam</th><th>NÃ£o gostam</th>      ","      </tr>                                      ","      <tr>                                       ",'        <td class="positive-votes">&nbsp;</td>   ','        <td class="negative-votes">&nbsp;</td>   ',"      </tr>                                      ","    </table>                                     ","  </div>                                         "].join(""),el:$("body"),elParticipants:$("#participants"),elPopover:$(".ranking-content .content"),initialize:function(){this.render()},render:function(){},participants:function(a){var b,c=a,d="",e="";for(var f in c){for(var g in c[f])e="",b=parseInt(f)+1,e+='<div class="row">',e+=' <dl class=participant-" + rankingPositionIndex + " rel="popover" ',e+='  data-positive-votes="'+c[f].positive_percentage+'" ',e+='  data-negative-votes="'+c[f].negative_percentage+'">',e+="   <dt>",e+='     <div class="participant-selfie" data-path-img="'+c[f].picture+'">',e+="     <em>"+b+"</em>",e+="     </div>",e+="   </dt>",e+="   <dd>"+c[f].name+"</dd>",e+="   <dd>"+c[f].description+"</dd>",e+=" </dl>",e+="</div>";d+=e}this.elParticipants.empty().append(d),$($(".participant-selfie")).each(function(){var a='transparent url("'+$(this).attr("data-path-img")+'") no-repeat 45% 50%';$(this).css("background",a).css("background-size","150%")})},popOvers:function(){this.elPopover.popover({selector:"[rel=popover]",trigger:"hover",content:this.popoverContent,template:this.popoverTemplate,placement:"right",html:!0}).parent().delegate("dl","mouseover",function(){var a=$(this).attr("data-positive-votes"),b=$(this).attr("data-negative-votes");$(this).parent().find("tr td.positive-votes").html(a),$(this).parent().find("tr td.negative-votes").html(b)})}})}(),fazenda.Models=fazenda.Models||{},function(){"use strict";fazenda.Models.Module=Backbone.Model.extend({url:"data/fazenda.json",initialize:function(){},defaults:{},validate:function(a,b){},parse:function(a,b){return a}})}(),fazenda.Collections=fazenda.Collections||{},function(){"use strict";fazenda.Collections.Module=Backbone.Collection.extend({initialize:function(a){},parse:function(a){return a},calcPercentageVote:function(a,b){var c=parseInt(a?a:0),d=parseInt(b?b:0),e=c+d,f=Math.round(100*c/e),g=Math.round(100*d/e);isNaN(f)&&(f=0),isNaN(g)&&(g=0);var h=f+g;if(h>100){var i=h-100;g>100?g-=i:f-=i}if(100>h&&h>0){var j=100-h;0==g?g+=j:f+=j}return[f+"%",g+"%"]},percentagesVote:function(a){for(var b=0,c=a.length;c>b;b++)a[b].negative_percentage=this.calcPercentageVote(a[b].negative,a[b].positive)[0],a[b].positive_percentage=this.calcPercentageVote(a[b].negative,a[b].positive)[1];return a},reorderJson:function(a,b){var c=_.sortBy(a,b).reverse();return c},participantsJson:function(a){var b,c;return b=this.percentagesVote(a),c=this.reorderJson(b,"positive_percentage")}})}();